{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"UIViewControllerPresenting"},{"type":"text","text":" acts as a building block for creating APIs - usually in the form of SwiftUI view modifiers - for presenting either built-in or your own custom UIKit view controllers."}]},{"anchor":"Wrapping-the-view-controller","level":2,"type":"heading","text":"Wrapping the view controller"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In this example, we have a custom "},{"type":"codeVoice","code":"WidgetViewController"},{"type":"text","text":" that is intended to be used as a reusable component throughout our app. Most of our app is written in SwiftUI and so we need an easy way of presenting the widget view from anywhere within our SwiftUI view hierarchy."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Additionally, the view is intended to be presented as a half sheet which we cannot accomplish in SwiftUI prior to iOS 16 without using a third-party library."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Using "},{"type":"codeVoice","code":"UIViewControllerPresenting"},{"type":"text","text":" we can create a binding-based SwiftUI view modifier that will display our widget view automatically. This is the final API we intend to build:"}]},{"type":"codeListing","syntax":"swift","code":["struct ContentView: View {","  @State var showingWidgetView: Bool = false","","  var body: some View {","    Text(\"Hello World\")","      .widgetView(isPresented: $showingWidgetView)","  }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"First, we need to be able to create an instance of "},{"type":"codeVoice","code":"UIViewControllerPresenting"},{"type":"text","text":" that will display our custom "},{"type":"codeVoice","code":"WidgetViewController"},{"type":"text","text":" - a good place to define this is in a static function in a constrained extension:"}]},{"type":"codeListing","syntax":"swift","code":["extension UIViewControllerPresenting where Controller == WidgetViewController {","  static func widgetViewController(isPresented: Binding<Bool>) -> Self {","    ...","  }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Because this is not the public API that we intend to expose to users, it is fine to leave this defined as "},{"type":"codeVoice","code":"internal"},{"type":"text","text":" or even "},{"type":"codeVoice","code":"private"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Next, we need to initialize and return a "},{"type":"codeVoice","code":"UIViewControllerPresenting"},{"type":"text","text":" instance - the "},{"type":"codeVoice","code":"makeUIViewController"},{"type":"text","text":" parameter takes a closure that should return an instance of the UIViewController that we want to present:"}]},{"type":"codeListing","syntax":"swift","code":["extension UIViewControllerPresenting where Controller == WidgetViewController {","  static func widgetViewController(isPresented: Binding<Bool>) {","    .init(","      isPresented: isPresented,","      makeUIViewController: { context, dismissHandler in","        let viewController = WidgetViewController()","        \/\/ Ensure the view is presented as a half sheet","        if let sheet = viewController.sheetPresentationController {","          sheet.detents = [.medium()]","        }","        return viewController","      }","    )","  }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Our custom controller is very simple, but it does have a completion handler API that will get called when a particular action happens and it is important for us to call the "},{"type":"codeVoice","code":"dismissHandler"},{"type":"text","text":" provided to the "},{"type":"codeVoice","code":"makeUIViewController"},{"type":"text","text":" closure whenever a view controller can be dismissed programatically. For delegate-based APIs, you will need to use a coordinator however as our controller uses a callback API we can handle it right here:"}]},{"type":"codeListing","syntax":"swift","code":["extension UIViewControllerPresenting where Controller == WidgetViewController {","  static func widgetViewController(isPresented: Binding<Bool>) {","    .init(","      isPresented: isPresented,","      makeUIViewController: { context, dismissHandler in","        let viewController = WidgetViewController()","        ...","        viewController.onCompletion = { dismissHandler() }","        return viewController","      }","    )","  }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Finally, in order to actually use this in a SwiftUI view, we need to embed it in the background. We will wrap this boilerplate up in an extension method on "},{"type":"codeVoice","code":"View"},{"type":"text","text":" and this will provide our public API. Alternatively, you could create a view modifier."}]},{"type":"codeListing","syntax":"swift","code":["public extension View {","  func widgetView(isPresented: Binding<Bool>) -> some View {","    background(","      UIViewControllerPresenting.widgetViewController(isPresented: isPresented)","    )","  }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now, whenever we call this on a SwiftUI view and pass it a binding to some boolean state, the view will be automatically presented whenever the state becomes true:"}]},{"type":"codeListing","syntax":"swift","code":["struct ContentView: View {","  @State var showingWidgetView: Bool = false","","  var body: some View {","    Button { ","      showingWidgetView = true","    } label: {","        Text(\"Open Widget View\")","    }","    .widgetView(isPresented: $showingWidgetView)","  }","}"]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/uiviewcontrollerpresenting\/gettingstarted"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/UIViewControllerPresenting\/documentation\/UIViewControllerPresenting\/GettingStarted","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"This article provides a basic overview for wrapping your own UIKit controller - for more examples see some of the examples provided as part of the Swift package."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Presenting UIKit view controllers from SwiftUI","role":"article","modules":[{"name":"UIViewControllerPresenting"}]},"hierarchy":{"paths":[["doc:\/\/UIViewControllerPresenting\/documentation\/UIViewControllerPresenting"]]},"seeAlsoSections":[{"title":"Essentials","identifiers":["doc:\/\/UIViewControllerPresenting\/documentation\/UIViewControllerPresenting\/UIViewControllerPresenting"],"generated":true}],"references":{"doc://UIViewControllerPresenting/documentation/UIViewControllerPresenting/UIViewControllerPresenting":{"role":"symbol","title":"UIViewControllerPresenting","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"UIViewControllerPresenting"}],"abstract":[{"type":"text","text":"A SwiftUI view that can be used to present an arbitrary UIKit view controller."}],"identifier":"doc:\/\/UIViewControllerPresenting\/documentation\/UIViewControllerPresenting\/UIViewControllerPresenting","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"UIViewControllerPresenting"}],"url":"\/documentation\/uiviewcontrollerpresenting\/uiviewcontrollerpresenting"},"doc://UIViewControllerPresenting/documentation/UIViewControllerPresenting":{"role":"collection","title":"UIViewControllerPresenting","abstract":[{"type":"text","text":"A library that allows you to present UIKit or SwiftUI views from an existing SwiftUI view using UIKit presentation APIs."}],"identifier":"doc:\/\/UIViewControllerPresenting\/documentation\/UIViewControllerPresenting","kind":"symbol","type":"topic","url":"\/documentation\/uiviewcontrollerpresenting"}}}